# Домашнее задание к лекции 3.3 «Асинхронность» 

## Задача №1. Будильник-колыбельная

Помогите старому знакомому Васе (он уже студент 1 курса, кстати) перестать просыпать на пары. 
Для этого нужно написать Программу-будильник с возможностью добавления, удаления, запусков и остановки будильников.

## Процесс реализации

1. Необходимо написать класс *AlarmClock* со следующими методами:

* `constructor` - выделяет память для объекта. 
	* Создайте свойство для хранения коллекции будильников `alarmCollection` с начальным значением пустого массива. 
	* Создайте свойство `timerId` для хранения `id` будильника без начального значения.

* `addClock` - добавляет новый будильник в коллекцию существующих. 
	* Принимает параметр времени в формате `HH:MM` - время, когда должно запуститься действие.
	* Принимает параметр функции-колбека - действие, которое должно запуститься.
	* Принимает параметр идентификатора создаваемого будильника.
	* Проверьте, передан ли параметр `id`. Если параметр не передан, выполните выброс ошибки (с помощью `throw new Error('error text')`).
	* Проверьте, есть ли какой-нибудь будильник с уже существующим `id`. Если есть, выведите ошибку (с помощью `console.error()`) и завершите выполнение метода. Программа должна продолжать работать, но будильник не должен быть добавлен.
	* Перед завершением метода добавьте в массив будильников объект со свойствами `id`, `time`, `callback`.

* `removeClock` - удаляет определённый будильник.
	* Принимает `id` будильника, который следует удалить.
	* Удалите из массива будильников тот, у которого `id` совпадает с текущим. (Например, можно использовать метод `filter`).
	* Верните логическое значение об успешности/провале удаления объекта будильника из общего массива.

* `getCurrentFormattedTime` - возвращает текущее время в строковом формате `HH:MM`.

* `start` - запускает все будильники
	* Создайте функцию проверки (`checkClock`), которая принимает будильник и проверяет: если текущее время совпадает с таймером будильника, то вызывайте колбек.
	* Если значение идентификатора таймера у текущего будильника отсутствует, то создайте новый таймер.
	* В этом интервале реализуйте функцию, которая будет перебирать все будильники, и для каждого вызывать функцию `checkClock`.
	* Результат функции `setInterval` сохраните в свойстве ??? текущего будильника.

* `stop` - останавливает выполнение всех будильников
	* Сделайте проверку существования идентификатора текущего будильника.
	* Если у свойства времени текущего будильника есть значение, то вызовите функцию `clearInterval` для удаления свойства время, а так же удалите значение из свойства идентификатора текущего таймера.

* `printAlarms` - выводит на экран все Будильники
	* С помощью метода `forEach` выведите информацию о каждом будильнике (`id` и `time`).

* `clearAlarms` - удаляет все будильники
	* Вызывает метод остановки таймера.
	* Удаляет все будильники.

2. Напишите пример использования класса *AlarmClock* (Реализуйте и запустите функцию `testCase`): 

* Создайте объект класса `AlarmClock`.

* Добавьте в созданный объект новый будильник с текущим временем и колбеком вывода текста на консоль. Так, чтобы после запуска, функция вывода *выполнилась несколько раз*.

* Добавьте ещё один будильник со временем +1 минуты от текущего времени и колбеком: вывода текста на консоль, а так же удалением этого будильника. Так, чтобы после запуска функция вывода *выполнилась один раз, а потом удалилась*.

* Добавьте ещё один будильник со временем +2 минут от текущего времени и колбеком: вывода текста на консоль, а так же остановки всех будильников, очистки всех будильников и выводом всех будильников. Так, чтобы после запуска функция вывода *выполнилась один раз, потом остановился интервал, все звонки очистились, и ничего не вывелось*.

* Напечатайте все будильники (должно вывестись 3 будильника).

* Запустите выполнение ваших будильников.

Результат работы должен быть примерно таким (код выполнялся по командам из консоли):

![](https://sun1-24.userapi.com/4e78x8Gim59SbBdHgqnEpIbGJiUkjbFP0dhT9A/bLPY-cmewxY.jpg)

### Критерии выполнения

1. Старайтесь избегать циклов. Задание можно реализовать без них. Вместо циклов используйте *функции высшего порядка*, изученные ранее.
2. Функция `testCase` может отличаться от описания в задании. Главное показать:
	* Создание объекта будильника;
	* Добавление нескольких будильников;
	* Удаление будильников в зависимости от условия;
	* Печать будильников перед удалением и после (для доказательства того, что будильники действительно добавляются и удаляются);
	* Запуск будильников и **срабатывание в нужное время**;
	* Остановка будильников.

## Требования для выполнения домашней работы

* браузер;
* редактор кода, например [Sublime][1] или [Visual Studio Code][2];
* аккаунт на [GitHub][0] ([инструкция по регистрации на GitHub][3]);
* система контроля версий [Git][4], установленная локально ([инструкция по установке Git][5]);
* запуск всех тестов должен успешно выполнять все тесты:
![графическое представление](../Jasmine/results/sucessed_tasks3_3.png)

## Решение задач
1. Перейти в папку задания, например, для первого задания `cd ./3.3-async`.
2. Открыть файл `task.js` в вашем редакторе кода и выполнить задание.
3. Открыть файл `index.html` в вашем браузере и с помощью консоли DevTools убедиться в правильности выводимых результатов.
4. Добавить файл `task.js` в индекс git с помощью команды `git add %file-path%`, где %file-path% - путь до целевого файла, например, для первого задания `git add async/task.js`.
5. Сделать коммит используя команду `git commit -m '%comment%'`, где %comment% - это произвольный комментарий к вашему коммиту, например, для первого задания 'first commit async'.
6. Опубликовать код в репозиторий homeworks с помощью команды `git push -u origin master`.
7. Прислать ссылку на репозиторий через личный кабинет на сайте [Нетологии][6].

[0]: https://github.com/
[1]: https://www.sublimetext.com/
[2]: https://code.visualstudio.com/
[3]: https://github.com/netology-code/guides/blob/master/git/github.md
[4]: https://git-scm.com/
[5]: https://github.com/netology-code/guides/blob/master/git/REAMDE.md
[6]: https://netology.ru/

*Никаких файлов прикреплять не нужно.*

Все задачи обязательны к выполнению для получения зачета. Присылать на проверку можно каждую задачу по отдельности или все задачи вместе. Во время проверки по частям ваша домашняя работа будет со статусом "На доработке".

Любые вопросы по решению задач задавайте в Slack-канале.
